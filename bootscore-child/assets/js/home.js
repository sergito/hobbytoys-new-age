document.addEventListener("DOMContentLoaded",(function(){class t{constructor(t){this.track=document.querySelector(t.trackSelector),this.prevBtn=document.getElementById(t.prevBtnId),this.nextBtn=document.getElementById(t.nextBtnId),this.itemWidth=t.itemWidth||280,this.gap=t.gap||24,this.autoPlay=t.autoPlay||!1,this.autoPlayDelay=t.autoPlayDelay||5e3,this.currentPosition=0,this.maxScroll=0,this.visibleItems=1,this.autoPlayTimer=null,this.track&&this.prevBtn&&this.nextBtn&&this.init()}init(){let t;this.calculateValues(),this.prevBtn.addEventListener("click",(()=>{this.scrollPrev(),this.resetAutoPlay()})),this.nextBtn.addEventListener("click",(()=>{this.scrollNext(),this.resetAutoPlay()})),this.autoPlay&&(this.track.addEventListener("mouseenter",(()=>this.stopAutoPlay())),this.track.addEventListener("mouseleave",(()=>this.startAutoPlay()))),window.addEventListener("resize",(()=>{clearTimeout(t),t=setTimeout((()=>{this.calculateValues(),this.updatePosition()}),250)})),this.addTouchSupport(),this.updateButtons(),this.autoPlay&&this.startAutoPlay()}calculateValues(){const t=this.track.parentElement.offsetWidth,e=this.track.children.length;this.visibleItems=Math.floor(t/(this.itemWidth+this.gap));const i=e*(this.itemWidth+this.gap)-this.gap;this.maxScroll=Math.max(0,i-t),this.currentPosition>this.maxScroll&&(this.currentPosition=this.maxScroll)}scrollPrev(){const t=(this.itemWidth+this.gap)*Math.min(this.visibleItems,2);this.currentPosition=Math.max(0,this.currentPosition-t),this.updatePosition()}scrollNext(){const t=(this.itemWidth+this.gap)*Math.min(this.visibleItems,2);this.currentPosition=Math.min(this.maxScroll,this.currentPosition+t),this.autoPlay&&this.currentPosition>=this.maxScroll?setTimeout((()=>{this.currentPosition=0,this.updatePosition()}),2e3):this.updatePosition()}updatePosition(){this.track.style.transform=`translateX(-${this.currentPosition}px)`,this.updateButtons()}updateButtons(){this.prevBtn.disabled=this.currentPosition<=0,this.nextBtn.disabled=this.currentPosition>=this.maxScroll}addTouchSupport(){let t=0,e=0,i=!1;this.track.addEventListener("touchstart",(s=>{t=s.touches[0].clientX,e=this.currentPosition,i=!0,this.track.style.transition="none"})),this.track.addEventListener("touchmove",(s=>{if(!i)return;const o=s.touches[0].clientX,a=e+(t-o);a>=0&&a<=this.maxScroll&&(this.currentPosition=a,this.track.style.transform=`translateX(-${this.currentPosition}px)`)})),this.track.addEventListener("touchend",(()=>{i=!1,this.track.style.transition="transform 0.5s cubic-bezier(0.4, 0, 0.2, 1)";const t=Math.round(this.currentPosition/(this.itemWidth+this.gap));this.currentPosition=t*(this.itemWidth+this.gap),this.updatePosition(),this.resetAutoPlay()}))}startAutoPlay(){this.autoPlay&&(this.stopAutoPlay(),this.autoPlayTimer=setInterval((()=>{this.currentPosition>=this.maxScroll?this.currentPosition=0:this.scrollNext()}),this.autoPlayDelay))}stopAutoPlay(){this.autoPlayTimer&&(clearInterval(this.autoPlayTimer),this.autoPlayTimer=null)}resetAutoPlay(){this.autoPlay&&(this.stopAutoPlay(),this.startAutoPlay())}}if(new t({trackSelector:".arts-carousel",prevBtnId:"arts-prev",nextBtnId:"arts-next",itemWidth:280,gap:24,autoPlay:!1}),new t({trackSelector:".vehicles-carousel",prevBtnId:"vehicles-prev",nextBtnId:"vehicles-next",itemWidth:280,gap:24,autoPlay:!1}),document.querySelectorAll(".wishlist-btn").forEach((t=>{t.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation();const e=this.getAttribute("data-product-id");this.querySelector("i");this.classList.toggle("active"),"undefined"!=typeof jQuery&&jQuery.ajax({url:wc_add_to_cart_params.ajax_url,type:"POST",data:{action:"add_to_wishlist",product_id:e,nonce:wc_add_to_cart_params.nonce},success:function(t){console.log("Producto agregado a favoritos")}})}))})),"undefined"!=typeof jQuery&&jQuery(document).on("added_to_cart",(function(t,e,i,s){const o=s.text();s.text("âœ“ Agregado"),s.addClass("added-success"),setTimeout((function(){s.text(o),s.removeClass("added-success")}),2e3)})),"IntersectionObserver"in window){const t=new IntersectionObserver(((t,e)=>{t.forEach((t=>{if(t.isIntersecting){const i=t.target;i.src=i.dataset.src||i.src,i.classList.add("loaded"),e.unobserve(i)}}))}));document.querySelectorAll('.product-image[loading="lazy"]').forEach((e=>{t.observe(e)}))}document.querySelectorAll('a[href^="#"]').forEach((t=>{t.addEventListener("click",(function(t){const e=this.getAttribute("href");if(e&&"#"!==e&&!e.startsWith("#!")){const i=document.querySelector(e);i&&(t.preventDefault(),i.scrollIntoView({behavior:"smooth",block:"start"}))}}))}))}));